Instructions for building and running a Docker image or using the Dockerfile generated using Basil

Basil generates a Dockerfile and uses it to build a Docker image for you. It provides you both the Docker image and the Dockerfile used for building the Docker image for provenance purposes. Should you desire to modify the Dockerfile in future and build a new Docker image, or just rebuild the Docker image on another platform (Windows, Linux, macOS) using the Dockerfile generated by Basil, the instructions provided below will be useful.

 

Prerequisites:

If you wish to build a Docker image on the system of your choice using the Dockerfile generated by Basil then please make sure that you have Docker installed on the system. Please review the steps below to install Docker.

 

If you have Singularity installed on the system of your choice then you can pull the Docker image from Docker Hub using Singularity, convert the Docker image into a Singularity image file and run it.

 

If you do not have Singularity or Docker available on the system on which you would like to run the docker image, then you would first need to install either one of these.

 

 

Steps for installing Docker on Windows:

1. Go to the Docker website: https://www.docker.com/get-started
2. Download the Docker Desktop Installer.exe file
3. Run the .exe file to run and finish the installation by following the on-screen instructions

 

 

 

Steps for installing Docker on macOS:

1. Open a terminal window
2. Run the following command to download the installer for Docker: curl -fsSL https://get.docker.com -o get-docker.sh
3. Now run this command to install Docker: sudo sh get-docker.sh

 

 

 

Steps for installing Docker on Linux:

1. Open a terminal window
2. Run the following command: sudo apt-add-repository https://download.docker.com/linux/ubuntu/repo/deb
3. Next, run this command: sudo apt update
4. Now, run this command: sudo apt install docker-ce
5. Finally, run this command to check if Docker has been installed correctly: docker version

 

 

#1 INSTRUCTIONS FOR RUNNING DOCKER IMAGE ON THE SYSTEM OF YOUR CHOICE

 

Case 1: The Docker image is available in your or someone else's Docker Hub account

 

Step 1: Go to the Docker Hub account from which you would like to pull a Docker image, locate the image of your choice, and copy the Docker Pull Command provided on the page. For example: docker pull basilproject/alpine .

Step 2: Paste the command in a terminal session and hit enter, it should pull the image from Docker Hub to your system.
Step 3: Run the Docker image using he docker run command as follows: 'docker run replace-this-with-your-image-name' and it should run your image and perform the task that it was programmed to do.

 

 

Case 2: Your or someone else's Docker image that may be available in Basil project's Docker Hub account

Step 1:  Go to https://hub.docker.com/ and type 'basilproject' in the search bar located in the top left part of the website. You do not need to have a Docker Hub account to perform this action.
Step 2: Locate the image that was pushed here, if you selected to push your image, the image name will have your username in it to make it easier to identify the image.
Step 3: Copy the Docker Pull Command provided on the webpage and paste it into your terminal session and hit enter.
Step 4: Once the pull has completed, run 'docker run [image name' command and it should run your image.

 

Case 3: Did not push the image to Docker Hub

Step 1: Check your email, you should have an email from 'icomputeus@gmail.com'. It should have a link to download the file as well as instructions on how to run it, they are also provided here.

Step2: Click the link to download the file, once the file has downloaded, open terminal and navigate to the folder where the .tar.gz file is located.

Step 3: Run this command, docker load < [image name.tar.gz] and wait for the image to be loaded.

Step 4: Confirm the image is available on your system by running 'docker image ls'. 

Step 5: Run the command, 'docker run [image name]', and you are done!

 

#2 INSTRUCTIONS FOR BUILDING THE DOCKER IMAGE FROM THE BASIL GENERATED DOCKERFILE

 

Note: You will need "sudo"/"root"/"admin" level permissions on the system on which you would need to build a Docker image.

 

Step 1: If you used the iSpec form om the Basil website to generate the Docker image, then you can download the Dockerfile from the link provided in the email notification you received from the Basil project. If you ran the "Basil" tool on the Basil website through the terminal tab, then would can click the "Refresh List" button on the terminal page, select the Dockerfile that you wish to download from the drop down menu, and click on the "Download" button.

 

Step 2: To build an image on the basis of the instructions on the Dockerfile, run the following command 'docker build .' from the folder containing the Dockerfile.

 

Step 3: Once the docker image is built successfully, type 'docker run [image name]' to run the image.

 

 

#3 INSTRUCTIONS FOR RUNNING THE IMAGE ON HPC SYSTEMS USING SINGULARITY

 

 

Step 1: f you are working on an HPC system that is provisioned with the module system, you can run the "module avail" command and check if Singularity is already installed. If Singularity is available as a module, you can load it by using the "module load [singularity-module-name]" command.

Step 2: Use the following command to pull an image from Docker Hub and convert it into Singularity Image Format (SIF) file.
        'singularity pull [image name].sif docker://[docker image name]:[tag]' # remove [] in actual use
Step 3: Run the Singularity image by using the command as follows
        'singularity run [image name].sif'

 

 


PLEASE NOTE: If you already have the image, you may not need to rebuild it. You can confirm if the image is available on your system by running the 'docker image ls' command in the terminal.

Additional functionality for generating container images and testing them through the Basil website will be made available soon. We look forward to your continued patronage. 

Thank you,
Team BASIL
